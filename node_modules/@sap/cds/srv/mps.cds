namespace cds_r; //> cds system tables

type TenantID : String;
@open type CSN {};
type XML : String;
type Locale : String;
type TAR : LargeBinary;

/**
 * Used by CAP runtimes to retrieve tenant-specific variants of
 * deployed models used to serve requests.
 */
@(requires : [
   'mtcallback'
])
@protocol: 'rest'
service ModelProviderService @(path:'/-/cds/model-provider') {
  action isExtended(tenant : TenantID) returns Boolean;
  action getCsn(tenant : TenantID, toggles : array of String, flavor: String enum { nodejs; java; }) returns CSN;
  action getOdataCsn(tenant : TenantID, toggles : array of String) returns CSN; // REVISIT: Replace by getCsn(..., flavor=node/java)
  action getEdmx(tenant : TenantID, toggles : array of String, serviceName : String, locale : Locale, odataFlavor : String) returns XML;
  action getResources(flat : Boolean) returns TAR;
}
