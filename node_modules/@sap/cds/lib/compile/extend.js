const { extend } = require ('../lazy')
const compile = require ('./index')

module.exports = o => o.definitions ? { with(...exts) {
  const all = { 'base.csn': JSON.stringify(o) }
  exts.forEach ((x,i)=> all[i+'.csn'] = JSON.stringify(x))
  return compile (all)
}} : extend(o)
