"use strict";function peg$subclass(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function peg$SyntaxError(t,r,e,n){this.message=t,this.expected=r,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(t,r){r=void 0!==r?r:{};var e,n={},s={ODataRelativeURI:je},a=je,u="/",o=Te("/",!1),c=Te("?",!1),i=Te("&",!1),f="$count",l=Te("$count",!1),h="$ref",p=Te("$ref",!1),A="$value",d=Te("$value",!1),g=function(t){return[t]},v="=",b=Te("=",!1),y="$skiptoken=",m=Te("$skiptoken=",!1),C="$apply=",w=Te("$apply=",!1),x="$select=",$=Te("$select=",!1),E="$expand=",L=Te("$expand=",!1),S="$filter=",B=Te("$filter=",!1),T="$orderby=",_=Te("$orderby=",!1),O="$top=",Z=Te("$top=",!1),R="$skip=",z=Te("$skip=",!1),F="$search=",j=Te("$search=",!1),k="$count=",N=Te("$count=",!1),D=Te("*",!1),U=Te(";",!1),P="/$count",q=Te("/$count",!1),I=function(t){return t?[t]:[]},M=function(t,r){t.push({xpr:r})},X=function(t,r){t.push({val:r})},Y=function(t,r,e){t.push(r,...e)},G=function(t,r){t.push(r)},H=function(t,r,e){t.push(r,...e)},J=":",K=Te(":",!1),Q="any",V=Te("any",!1),W="all",tt=Te("all",!1),rt=Te("asc",!1),et="desc",nt=Te("desc",!1),st=/^[a-zA-Z]/,at=_e([["a","z"],["A","Z"]],!1,!1),ut=/^[a-zA-Z0-9\-]/,ot=_e([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),ct=/^[^&]/,it=_e(["&"],!0,!1),ft=Oe("a comparison"),lt=Te("eq",!1),ht=Te("ne",!1),pt=Te("lt",!1),At=Te("gt",!1),dt=Te("le",!1),gt=Te("ge",!1),vt=(Te("add",!1),Te("sub",!1),Te("mul",!1),Te("div",!1),Te("mod",!1),Oe("an operand")),bt=Oe("navigation with $count"),yt=function(t,r){return r},mt=function(t,r){return r?{id:t,where:r}:t},Ct=Oe("a reference"),wt=function(t,r){return r},xt=function(t){return{val:t}},$t=Te("{",!1),Et=/^[^}]/,Lt=_e(["}"],!0,!1),St=Te("}",!1),Bt="[",Tt=Te("[",!1),_t="]",Ot=Te("]",!1),Zt=/^[^\]]/,Rt=_e(["]"],!0,!1),zt=Oe("a function call"),Ft=function(t,r,e){return e},jt=Oe("a boolean function"),kt="contains",Nt=Te("contains",!0),Dt="endswith",Ut=Te("endswith",!0),Pt="startswith",qt=Te("startswith",!0),It=Te("NOT",!0),Mt=Te("AND",!0),Xt=Te("OR",!0),Yt="aggregate",Gt=Te("aggregate",!1),Ht="groupby",Jt=Te("groupby",!1),Kt="filter",Qt=Te("filter",!1),Vt="expand",Wt=Te("expand",!1),tr="search",rr=Te("search",!1),er="concat",nr=Te("concat",!1),sr="compute",ar=Te("compute",!1),ur=Te("topcount",!0),or=Te("bottomcount",!0),cr=Te("topsum",!0),ir=Te("bottomsum",!0),fr=Te("toppercent",!0),lr=Te("bottompercent",!0),hr=function(t,r){return r},pr="with",Ar=Te("with",!1),dr="from",gr=Te("from",!1),vr=Te("as",!1),br="rollup",yr=Te("rollup",!1),mr="$all",Cr=Te("$all",!1),wr="identity",xr=Te("identity",!1),$r="true",Er=Te("true",!1),Lr="false",Sr=Te("false",!1),Br=Oe("Edm.String"),Tr="'",_r=Te("'",!1),Or="''",Zr=Te("''",!1),Rr=/^[^']/,zr=_e(["'"],!0,!1),Fr='"',jr=Te('"',!1),kr='\\"',Nr=Te('\\"',!1),Dr=/^[^"]/,Ur=_e(['"'],!0,!1),Pr=/^[^ \t\n()"&;]/,qr=_e([" ","\t","\n","(",")",'"',"&",";"],!0,!1),Ir=/^[0-9]/,Mr=_e([["0","9"]],!1,!1),Xr="-",Yr=Te("-",!1),Gr=Te("T",!1),Hr=".",Jr=Te(".",!1),Kr=Te("Z",!1),Qr=Te("+",!1),Vr=/^[+\-]/,Wr=_e(["+","-"],!1,!1),te=Te("e",!1),re=/^[_a-zA-Z]/,ee=_e(["_",["a","z"],["A","Z"]],!1,!1),ne=/^[_a-zA-Z0-9"."]/,se=_e(["_",["a","z"],["A","Z"],["0","9"],'"',".",'"'],!1,!1),ae=/^[0-9a-fA-F]/,ue=_e([["0","9"],["a","f"],["A","F"]],!1,!1),oe=/^[^\/?]/,ce=_e(["/","?"],!0,!1),ie=/^[a-zA-Z0-9\-"."_~!$'()*+,;=:@"\/""?"]/,fe=_e([["a","z"],["A","Z"],["0","9"],"-",'"',".",'"',"_","~","!","$","'","(",")","*","+",",",";","=",":","@",'"',"/",'"','"',"?",'"'],!1,!1),le="binary'",he=Te("binary'",!1),pe=/^[a-zA-Z0-9\-_]/,Ae=_e([["a","z"],["A","Z"],["0","9"],"-","_"],!1,!1),de="==",ge=Te("==",!1),ve=Te(",",!1),be=Te("(",!1),ye=Te(")",!1),me=Oe("optional whitespaces"),Ce=/^[ \t\n]/,we=_e([" ","\t","\n"],!1,!1),xe=Oe("mandatory whitespaces"),$e=0,Ee=[{line:1,column:1}],Le=0,Se=[],Be=0;if("startRule"in r){if(!(r.startRule in s))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=s[r.startRule]}function Te(t,r){return{type:"literal",text:t,ignoreCase:r}}function _e(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Oe(t){return{type:"other",description:t}}function Ze(r){var e,n=Ee[r];if(n)return n;for(e=r-1;!Ee[e];)e--;for(n={line:(n=Ee[e]).line,column:n.column};e<r;)10===t.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return Ee[r]=n,n}function Re(t,r){var e=Ze(t),n=Ze(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function ze(t){$e<Le||($e>Le&&(Le=$e,Se=[]),Se.push(t))}function Fe(t,r,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(t,r),t,r,e)}function je(){var r,e,s,a,f,l,h,p,A,d,g,v,b,y;if(r=$e,47===t.charCodeAt($e)?(e=u,$e++):(e=n,0===Be&&ze(o)),e===n&&(e=null),e!==n)if(s=$e,(a=ke())!==n&&(s,a=void(jn=a)),(s=a)!==n){if(a=$e,(f=_n())!==n)if(63===t.charCodeAt($e)?(l="?",$e++):(l=n,0===Be&&ze(c)),l!==n)if((h=_n())!==n)if((p=De())!==n){for(A=[],d=$e,(g=_n())!==n?(38===t.charCodeAt($e)?(v="&",$e++):(v=n,0===Be&&ze(i)),v!==n&&(b=_n())!==n&&(y=De())!==n?d=g=[g,v,b,y]:($e=d,d=n)):($e=d,d=n);d!==n;)A.push(d),d=$e,(g=_n())!==n?(38===t.charCodeAt($e)?(v="&",$e++):(v=n,0===Be&&ze(i)),v!==n&&(b=_n())!==n&&(y=De())!==n?d=g=[g,v,b,y]:($e=d,d=n)):($e=d,d=n);A!==n?a=f=[f,l,h,p,A]:($e=a,a=n)}else $e=a,a=n;else $e=a,a=n;else $e=a,a=n;else $e=a,a=n;a===n&&(a=null),a!==n&&(f=_n())!==n?(r,r=e=function(){if(kn)return jn.columns=[{args:[{val:1}],as:"$count",func:"count"}],delete jn.expand,delete jn.limit,delete jn.orderBy,jn.apply&&(jn.apply={apply:jn.apply},Xn(jn,jn.apply)),{SELECT:jn};let t;if(jn.expand){jn.columns||(jn.columns=["*"],t=!0);for(const t of jn.expand){const r=jn.columns.findIndex(Pn(t));r>-1&&jn.columns.splice(r,1),jn.columns.push(t)}delete jn.expand}return jn.count&&jn.apply&&(jn.__countAggregated=!0),Xn(jn,jn.apply,t),{SELECT:jn}}()):($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;return r}function ke(){var r,e,s,a,c,i,v,b;return r=$e,t.substr($e,6)===f?(e=f,$e+=6):(e=n,0===Be&&ze(l)),e!==n&&(r,e=void(kn=!0)),(r=e)===n&&(r=$e,e=$e,t.substr($e,4)===h?(s=h,$e+=4):(s=n,0===Be&&ze(p)),s===n&&(t.substr($e,6)===A?(s=A,$e+=6):(s=n,0===Be&&ze(d))),(e=s!==n?t.substring(e,$e):s)!==n&&(r,b=e,e=!Nn.includes(b)&&{from:{ref:[b]}}),(r=e)===n&&(r=$e,e=$e,(s=xn())!==n?(a=$e,(c=Bn())!==n&&(i=Tn())!==n?a=c=[c,i]:($e=a,a=n),a===n&&(a=$e,(c=Bn())!==n&&(i=Ne())!==n&&(v=Tn())!==n?a=c=[c,i,v]:($e=a,a=n)),a===n&&(a=null),a!==n?(c=$e,Be++,i=Ln(),Be--,i===n?c=void 0:($e=c,c=n),c!==n?e=s=[s,a,c]:($e=e,e=n)):($e=e,e=n)):($e=e,e=n),e===n&&(e=$e,(s=Ln())!==n&&(e,s=g(s)),e=s),e===n&&(e=null),e!==n?(s=$e,a=$e,47===t.charCodeAt($e)?(c=u,$e++):(c=n,0===Be&&ze(o)),c!==n&&(a,c=c),(a=c)!==n?((c=ke())===n&&(c=null),c!==n?s=a=[a,c]:($e=s,s=n)):($e=s,s=n),s===n&&(s=null),s!==n?(r,r=e=function(t,r){if(r=r&&r[1],!t&&!r)return{from:{ref:[""]}};if(!t&&r&&r.from)return r.from.ref.unshift(""),r;const[e,n]=t,s=[];if(n?n.length>2?s.push({id:e,where:n[1].map((t=>t.val&&t.val.match&&t.val.match(/^"(.*)"$/)?{val:t.val.match(/^"(.*)"$/)[1]}:t))}):s.push({id:e,where:[]}):zn?s.push(`${"object"==typeof e&&"val"in e?e.val:e}`):"object"==typeof e&&"string"==typeof e.val&&e.val.match(/^[1-9]\d*$|^0$/)?s.push({val:Dn(e.val)}):s.push(e),r&&r.from){const t=r.from.ref;Object.prototype.hasOwnProperty.call(t[0],"val")&&(s[s.length-1]={id:s[s.length-1],where:[t.shift()]}),s.push(...t)}const a={from:{ref:s}};return r&&r.columns&&(a.columns=r.columns),a}(e,s)):($e=r,r=n)):($e=r,r=n))),r}function Ne(){var r,e,s,a,u,o,c;return r=$e,(e=rn())!==n&&(r,e=g(e)),(r=e)===n&&(r=$e,(e=tn())!==n&&_n()!==n?(61===t.charCodeAt($e)?(s="=",$e++):(s=n,0===Be&&ze(b)),s!==n&&_n()!==n&&(a=rn())!==n?(u=$e,(o=Sn())!==n&&(c=Ne())!==n?u=o=[o,c]:($e=u,u=n),u===n&&(u=null),u!==n?(r,r=e=function(t,r,e){const n=[t,"=",r];return e&&n.push("and",...e[1]),n}(e,a,u)):($e=r,r=n)):($e=r,r=n)):($e=r,r=n)),r}function De(){var r,e,s,a;return(r=Ue())===n&&(r=$e,t.substr($e,11)===y?(e=y,$e+=11):(e=n,0===Be&&ze(m)),e!==n&&(s=_n())!==n?(a=function(){var r,e,s;r=$e,(e=wn())===n&&(e=null);e!==n?(s=function(){var r,e,s;r=$e,e=[],ie.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(fe));if(s!==n)for(;s!==n;)e.push(s),ie.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(fe));else e=n;r=e!==n?t.substring(r,$e):e;return r}(),s===n&&(s=null),s!==n?(r,a=e,r=e=void(s||Yn(a))):($e=r,r=n)):($e=r,r=n);var a;return r}(),a!==n?r=e=[e,s,a]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,t.substr($e,7)===C?(e=C,$e+=7):(e=n,0===Be&&ze(w)),e!==n?(s=$e,(a=_n())!==n&&(s,a=void(jn.apply={})),(s=a)!==n&&(a=Qe())!==n?r=e=[e,s,a]:($e=r,r=n)):($e=r,r=n),r===n&&(r=function(){var r,e,s,a,u,o;r=$e,st.test(t.charAt($e))?(e=t.charAt($e),$e++):(e=n,0===Be&&ze(at));if(e!==n){for(s=[],ut.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(ot));a!==n;)s.push(a),ut.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(ot));if(s!==n)if(61===t.charCodeAt($e)?(a=v,$e++):(a=n,0===Be&&ze(b)),a!==n){for(u=[],ct.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(it));o!==n;)u.push(o),ct.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(it));u!==n?r=e=[e,s,a,u]:($e=r,r=n)}else $e=r,r=n;else $e=r,r=n}else $e=r,r=n;return r}()))),r}function Ue(){var r,e,s,a,u,o,c,i,f,l;if(r=$e,t.substr($e,8)===x?(e=x,$e+=8):(e=n,0===Be&&ze($)),e!==n)if((s=_n())!==n)if((a=Pe())!==n){for(u=[],o=$e,(c=Sn())!==n&&(i=Pe())!==n?o=c=[c,i]:($e=o,o=n);o!==n;)u.push(o),o=$e,(c=Sn())!==n&&(i=Pe())!==n?o=c=[c,i]:($e=o,o=n);u!==n?r=e=[e,s,a,u]:($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;else $e=r,r=n;if(r===n){if(r=$e,t.substr($e,8)===E?(e=E,$e+=8):(e=n,0===Be&&ze(L)),e!==n)if((s=_n())!==n)if((a=qe())!==n){for(u=[],o=$e,(c=Sn())!==n&&(i=qe())!==n?o=c=[c,i]:($e=o,o=n);o!==n;)u.push(o),o=$e,(c=Sn())!==n&&(i=qe())!==n?o=c=[c,i]:($e=o,o=n);u!==n?r=e=[e,s,a,u]:($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;else $e=r,r=n;if(r===n&&(r=$e,t.substr($e,8)===S?(e=S,$e+=8):(e=n,0===Be&&ze(B)),e!==n&&(s=_n())!==n&&(a=Xe())!==n?(r,l=a,r=e=void(jn.where=l)):($e=r,r=n),r===n)){if(r=$e,t.substr($e,9)===T?(e=T,$e+=9):(e=n,0===Be&&ze(_)),e!==n)if((s=_n())!==n)if((a=Ke())!==n){for(u=[],o=$e,(c=Sn())!==n&&(i=Ke())!==n?o=c=[c,i]:($e=o,o=n);o!==n;)u.push(o),o=$e,(c=Sn())!==n&&(i=Ke())!==n?o=c=[c,i]:($e=o,o=n);u!==n?r=e=[e,s,a,u]:($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;else $e=r,r=n;r===n&&(r=$e,t.substr($e,5)===O?(e=O,$e+=5):(e=n,0===Be&&ze(Z)),e!==n&&(s=_n())!==n?(a=function(){var t,r;t=$e,(r=wn())!==n&&(t,e=r,r=void((jn.limit||(jn.limit={})).rows={val:e}));var e;return t=r}(),a!==n?r=e=[e,s,a]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,t.substr($e,6)===R?(e=R,$e+=6):(e=n,0===Be&&ze(z)),e!==n&&(s=_n())!==n?(a=function(){var t,r;t=$e,(r=wn())!==n&&(t,r=void Yn(r));return t=r}(),a!==n?r=e=[e,s,a]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,t.substr($e,8)===F?(e=F,$e+=8):(e=n,0===Be&&ze(j)),e!==n&&(s=_n())!==n&&(a=Ie())!==n?(r,r=e=void((f=a)&&(jn.search=f))):($e=r,r=n),r===n&&(r=$e,t.substr($e,7)===k?(e=k,$e+=7):(e=n,0===Be&&ze(N)),e!==n&&(s=_n())!==n?(a=function(){var t,r;t=$e,(r=mn())!==n&&(t,r=void(r&&(jn.count=!0)));return t=r}(),a!==n?r=e=[e,s,a]:($e=r,r=n)):($e=r,r=n)))))}}return r}function Pe(){var r,e,s;return r=$e,42===t.charCodeAt($e)?(e="*",$e++):(e=n,0===Be&&ze(D)),e===n&&(e=tn()),e!==n&&(r,s=e,jn.columns=Array.isArray(jn.columns)?jn.columns:[],jn.columns.find(Pn(s))||jn.columns.push(s),e=s),r=e}function qe(){var r,e,s,a,u,o,c,i,f,l,h;if(r=$e,e=$e,42===t.charCodeAt($e)?(s="*",$e++):(s=n,0===Be&&ze(D)),s===n&&(s=tn()),s!==n&&(e,s=function(t){const r="*"===t?{}:t;return r.expand="*",Array.isArray(jn.expand)||(jn.expand=[]),jn.expand.find(Pn(r))||jn.expand.push(r),r}(s)),(e=s)!==n){if(s=$e,a=$e,(u=Bn())!==n&&(a,Fn.push(jn),jn=jn.expand[jn.expand.length-1],u=void(jn.expand="*")),(a=u)!==n){for(u=$e,o=[],c=$e,(i=_n())!==n?(59===t.charCodeAt($e)?(f=";",$e++):(f=n,0===Be&&ze(U)),f===n&&(f=null),f!==n&&(l=_n())!==n&&(h=Ue())!==n?c=i=[i,f,l,h]:($e=c,c=n)):($e=c,c=n);c!==n;)o.push(c),c=$e,(i=_n())!==n?(59===t.charCodeAt($e)?(f=";",$e++):(f=n,0===Be&&ze(U)),f===n&&(f=null),f!==n&&(l=_n())!==n&&(h=Ue())!==n?c=i=[i,f,l,h]:($e=c,c=n)):($e=c,c=n);o!==n&&(u,o=function(t){if(jn.columns){"*"===jn.expand&&(jn.expand=[]);for(const t of jn.columns)jn.expand.find(Pn(t))||jn.expand.push(t);delete jn.columns}else Array.isArray(jn.expand)&&-1===jn.expand.indexOf("*")&&jn.expand.unshift("*")}()),(u=o)!==n?(o=$e,(c=Tn())!==n&&(o,c=void(jn=Fn.pop())),(o=c)!==n?s=a=[a,u,o]:($e=s,s=n)):($e=s,s=n)}else $e=s,s=n;s===n&&(s=null),s!==n?(a=$e,(u=Sn())!==n&&(o=qe())!==n?a=u=[u,o]:($e=a,a=n),a===n&&(a=null),a!==n?(u=$e,t.substr($e,7)===P?(o=P,$e+=7):(o=n,0===Be&&ze(q)),o!==n&&(u,o=function(){const t=new Error("EXPAND_COUNT_UNSUPPORTED");throw t.statusCode=501,t}()),(u=o)===n&&(u=null),u!==n?r=e=[e,s,a,u]:($e=r,r=n)):($e=r,r=n)):($e=r,r=n)}else $e=r,r=n;return r}function Ie(){var t,r;return t=$e,(r=Me())!==n&&(t,r=r),(t=r)===n&&(t=_n()),t}function Me(){var r,e,s,a,u,o,c;if(r=$e,e=$e,(s=an())===n&&(s=null),s!==n&&(e,s=I(s)),(e=s)!==n)if(s=$e,(a=Bn())!==n&&(u=Me())!==n&&(o=Tn())!==n?(s,s=a=M(e,u)):($e=s,s=n),s===n&&(s=$e,a=function(){var r,e,s,a,u;r=$e,34===t.charCodeAt($e)?(e=Fr,$e++):(e=n,0===Be&&ze(jr));if(e!==n){for(s=$e,a=[],t.substr($e,2)===kr?(u=kr,$e+=2):(u=n,0===Be&&ze(Nr)),u===n&&(Dr.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(Ur)));u!==n;)a.push(u),t.substr($e,2)===kr?(u=kr,$e+=2):(u=n,0===Be&&ze(Nr)),u===n&&(Dr.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(Ur)));(s=a!==n?t.substring(s,$e):a)!==n?(34===t.charCodeAt($e)?(a=Fr,$e++):(a=n,0===Be&&ze(jr)),a!==n?(r,r=e=s.replace(/\\\\/g,"\\").replace(/\\"/g,'"')):($e=r,r=n)):($e=r,r=n)}else $e=r,r=n;return r}(),a!==n&&(s,a=X(e,a)),(s=a)===n&&(s=$e,(a=Cn())!==n&&(s,a=X(e,a)),(s=a)===n&&(s=$e,a=function(){var r,e,s;r=$e,e=[],Pr.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(qr));if(s!==n)for(;s!==n;)e.push(s),Pr.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(qr));else e=n;r=e!==n?t.substring(r,$e):e;return r}(),a!==n&&(s,a=X(e,a)),s=a))),s!==n){for(a=[],u=$e,(o=un())===n&&(o=cn())===n&&(o=on()),o!==n&&(c=Me())!==n?(u,u=o=Y(e,o,c)):($e=u,u=n);u!==n;)a.push(u),u=$e,(o=un())===n&&(o=cn())===n&&(o=on()),o!==n&&(c=Me())!==n?(u,u=o=Y(e,o,c)):($e=u,u=n);a!==n?(r,r=e=e):($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;return r}function Xe(){var t,r;return t=$e,(r=Ye())!==n&&(t,r=r),t=r}function Ye(){var r,e,s,a,u,o,c,i;if(r=$e,e=$e,(s=an())===n&&(s=null),s!==n&&(e,s=I(s)),(e=s)!==n)if(s=$e,(a=Bn())!==n&&(u=Ye())!==n&&(o=Tn())!==n?(s,s=a=M(e,u)):($e=s,s=n),s===n&&(s=$e,(a=Ve())!==n&&(s,i=a,a=void e.push(...i)),(s=a)===n&&(s=$e,(a=Ge())!==n&&(s,a=function(t,r){"not"===t[t.length-1]&&"not"===r[0]?t.push("(",...r,")"):t.push(...r)}(e,a)),(s=a)===n&&(s=$e,a=function(){var r,e,s,a;Be++,r=$e,t.substr($e,8).toLowerCase()===kt?(e=t.substr($e,8),$e+=8):(e=n,0===Be&&ze(Nt));e===n&&(t.substr($e,8).toLowerCase()===Dt?(e=t.substr($e,8),$e+=8):(e=n,0===Be&&ze(Ut)),e===n&&(t.substr($e,10).toLowerCase()===Pt?(e=t.substr($e,10),$e+=10):(e=n,0===Be&&ze(qt))));e!==n&&Bn()!==n&&(s=We())!==n&&Sn()!==n&&(a=We())!==n&&Tn()!==n?(r,u=s,o=a,r=e={func:e.toLowerCase(),args:[u,o]}):($e=r,r=n);var u,o;Be--,r===n&&(e=n,0===Be&&ze(jt));return r}(),a!==n&&(s,a=function(t,r){t.push(r)}(e,a)),(s=a)===n&&(s=$e,(a=mn())!==n&&(s,a=X(e,a)),s=a)))),s!==n){for(a=[],u=$e,(o=un())===n&&(o=cn()),o!==n&&(c=Ye())!==n?(u,u=o=Y(e,o,c)):($e=u,u=n);u!==n;)a.push(u),u=$e,(o=un())===n&&(o=cn()),o!==n&&(c=Ye())!==n?(u,u=o=Y(e,o,c)):($e=u,u=n);a!==n?(r,r=e=e):($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;return r}function Ge(){var r,e,s,a,c,i,f;if(r=$e,e=$e,(s=xn())!==n&&(e,s=[s]),(e=s)!==n)if(47===t.charCodeAt($e)?(s=u,$e++):(s=n,0===Be&&ze(o)),s!==n){for(a=[],c=$e,(i=xn())!==n?(47===t.charCodeAt($e)?(f=u,$e++):(f=n,0===Be&&ze(o)),f!==n?(c,c=i=G(e,i)):($e=c,c=n)):($e=c,c=n);c!==n;)a.push(c),c=$e,(i=xn())!==n?(47===t.charCodeAt($e)?(f=u,$e++):(f=n,0===Be&&ze(o)),f!==n?(c,c=i=G(e,i)):($e=c,c=n)):($e=c,c=n);a!==n?(c=$e,i=function(){var r,e,s;r=$e,t.substr($e,3)===Q?(e=Q,$e+=3):(e=n,0===Be&&ze(V));e!==n&&Bn()!==n?((s=Je())===n&&(s=null),s!==n&&Tn()!==n?(r,r=e=s):($e=r,r=n)):($e=r,r=n);return r}(),i!==n&&(c,i=function(t,r){let e=t.pop();if(!r)return["exists",{ref:[...t,{id:e}]}];let n=[];for(let t=0,s=0;t<r.length;++t){let a=r[t];a.ref&&0===a.ref.length&&"="===r[t+1]?n[s++]={func:"contains",args:[{ref:e},r[t+=2]]}:n[s++]=a}return n.length<r.length?(e=t.pop(),["exists",{ref:[...t,{id:e,where:n}]}]):["exists",{ref:[...t,{id:e,where:r}]}]}(e,i)),(c=i)===n&&(c=$e,i=function(){var r,e,s;r=$e,t.substr($e,3)===W?(e=W,$e+=3):(e=n,0===Be&&ze(tt));e!==n&&Bn()!==n&&(s=Je())!==n&&Tn()!==n?(r,r=e=s):($e=r,r=n);return r}(),i!==n&&(c,i=function(t,r){let e=t.pop();return["not","exists",{ref:[...t,{id:e,where:["not",{xpr:[...r]}]}]}]}(e,i)),c=i),c!==n?(r,r=e=c):($e=r,r=n)):($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;return r}function He(){var t,r,e,s,a,u,o,c,i;if(t=$e,r=$e,(e=an())===n&&(e=null),e!==n&&(r,e=(c=e)?[c]:[]),(r=e)!==n)if(e=$e,(s=Bn())!==n&&(a=He())!==n&&(u=Tn())!==n?(e,i=a,e=s=void r.push("(",...i,")")):($e=e,e=n),e===n&&(e=$e,(s=Ve())!==n&&(e,s=function(t,r){t.push(...r)}(r,s)),(e=s)===n&&(e=$e,(s=sn())!==n&&(e,s=function(t,r){t.push(r)}(r,s)),(e=s)===n&&(e=$e,(s=Ge())!==n&&(e,s=function(t,r){t.push(...r)}(r,s)),e=s))),e!==n){for(s=[],a=$e,(u=un())===n&&(u=cn()),u!==n&&(o=He())!==n?(a,a=u=H(r,u,o)):($e=a,a=n);a!==n;)s.push(a),a=$e,(u=un())===n&&(u=cn()),u!==n&&(o=He())!==n?(a,a=u=H(r,u,o)):($e=a,a=n);s!==n?(t,t=r=r):($e=t,t=n)}else $e=t,t=n;else $e=t,t=n;return t}function Je(){var r,e,s,a;return r=$e,(e=xn())!==n?(58===t.charCodeAt($e)?(s=J,$e++):(s=n,0===Be&&ze(K)),s!==n&&(a=He())!==n?(r,r=e=Gn(e,a)):($e=r,r=n)):($e=r,r=n),r}function Ke(){var r,e,s,a,u;return r=$e,e=$e,(s=Ge())!==n&&(e,s=function(){const t=new Error("ORDERBY_LAMBDA_UNSUPPORTED");throw t.statusCode=501,t}()),(e=s)===n&&(e=sn())===n&&(e=tn()),e!==n?(s=$e,On()!==n?(a=$e,"asc"===t.substr($e,3)?(u="asc",$e+=3):(u=n,0===Be&&ze(rt)),u===n&&(t.substr($e,4)===et?(u=et,$e+=4):(u=n,0===Be&&ze(nt))),(a=u!==n?t.substring(a,$e):u)!==n?(s,s=a):($e=s,s=n)):($e=s,s=n),s===n&&(s=null),s!==n?(r,r=e=function(t,r){const e=Zn(t,r&&{sort:r});jn.orderBy=jn.orderBy?[...jn.orderBy,e]:[e]}(e,s)):($e=r,r=n)):($e=r,r=n),r}function Qe(){var r,e,s,a,c,i;if(r=$e,(e=fn())!==n){for(s=[],a=$e,47===t.charCodeAt($e)?(c=u,$e++):(c=n,0===Be&&ze(o)),c!==n&&(i=fn())!==n?a=c=[c,i]:($e=a,a=n);a!==n;)s.push(a),a=$e,47===t.charCodeAt($e)?(c=u,$e++):(c=n,0===Be&&ze(o)),c!==n&&(i=fn())!==n?a=c=[c,i]:($e=a,a=n);s!==n?r=e=[e,s]:($e=r,r=n)}else $e=r,r=n;return r}function Ve(){var r,e,s,a,u,o;return Be++,r=$e,(e=We())!==n&&On()!==n?(s=$e,"eq"===t.substr($e,2)?(a="eq",$e+=2):(a=n,0===Be&&ze(lt)),a===n&&("ne"===t.substr($e,2)?(a="ne",$e+=2):(a=n,0===Be&&ze(ht)),a===n&&("lt"===t.substr($e,2)?(a="lt",$e+=2):(a=n,0===Be&&ze(pt)),a===n&&("gt"===t.substr($e,2)?(a="gt",$e+=2):(a=n,0===Be&&ze(At)),a===n&&("le"===t.substr($e,2)?(a="le",$e+=2):(a=n,0===Be&&ze(dt)),a===n&&("ge"===t.substr($e,2)?(a="ge",$e+=2):(a=n,0===Be&&ze(gt))))))),(s=a!==n?t.substring(s,$e):a)!==n&&(a=On())!==n&&(u=We())!==n?(r,r=e=[e,{eq:"=",ne:"!=",lt:"<",gt:">",le:"<=",ge:">="}[o=s]||o,u]):($e=r,r=n)):($e=r,r=n),Be--,r===n&&(e=n,0===Be&&ze(ft)),r}function We(){var r;return Be++,r=function(){var r,e,s,a,c,i,h;Be++,r=$e,e=[],s=$e,(a=xn())!==n?(c=$e,(i=Bn())!==n&&(h=Ne())!==n&&Tn()!==n?(c,c=i=yt(0,h)):($e=c,c=n),c===n&&(c=null),c!==n?(47===t.charCodeAt($e)?(i=u,$e++):(i=n,0===Be&&ze(o)),i!==n?(s,s=a=mt(a,c)):($e=s,s=n)):($e=s,s=n)):($e=s,s=n);if(s!==n)for(;s!==n;)e.push(s),s=$e,(a=xn())!==n?(c=$e,(i=Bn())!==n&&(h=Ne())!==n&&Tn()!==n?(c,c=i=yt(0,h)):($e=c,c=n),c===n&&(c=null),c!==n?(47===t.charCodeAt($e)?(i=u,$e++):(i=n,0===Be&&ze(o)),i!==n?(s,s=a=mt(a,c)):($e=s,s=n)):($e=s,s=n)):($e=s,s=n);else e=n;e!==n?(t.substr($e,6)===f?(s=f,$e+=6):(s=n,0===Be&&ze(l)),s!==n?(r,r=e={func:"count",as:"$count",args:[{ref:e}]}):($e=r,r=n)):($e=r,r=n);Be--,r===n&&(e=n,0===Be&&ze(bt));return r}(),r===n&&(r=sn())===n&&(r=rn())===n&&(r=tn())===n&&(r=en())===n&&(r=nn())===n&&(r=function(){var r,e,s,a,u;r=$e,91===t.charCodeAt($e)?(e=Bt,$e++):(e=n,0===Be&&ze(Tt));if(e!==n){for(s=$e,a=[],Zt.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(Rt));u!==n;)a.push(u),Zt.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(Rt));(s=a!==n?t.substring(s,$e):a)!==n?(93===t.charCodeAt($e)?(a=_t,$e++):(a=n,0===Be&&ze(Ot)),a!==n?(r,r=e={list:s.replace(/"/g,"").split(",").map((t=>({val:t})))}):($e=r,r=n)):($e=r,r=n)}else $e=r,r=n;return r}()),Be--,r===n&&(n,0===Be&&ze(vt)),r}function tn(){var r,e,s,a,c,i,f,l;if(Be++,r=$e,(e=xn())!==n){for(s=[],a=$e,47===t.charCodeAt($e)?(c=u,$e++):(c=n,0===Be&&ze(o)),c!==n&&(i=xn())!==n?(a,a=c=wt(0,i)):($e=a,a=n);a!==n;)s.push(a),a=$e,47===t.charCodeAt($e)?(c=u,$e++):(c=n,0===Be&&ze(o)),c!==n&&(i=xn())!==n?(a,a=c=wt(0,i)):($e=a,a=n);s!==n?(r,l=s,r=e="null"===(f=e)?{val:null}:{ref:[f,...l]}):($e=r,r=n)}else $e=r,r=n;return Be--,r===n&&(e=n,0===Be&&ze(Ct)),r}function rn(){var r,e,s;return r=$e,(e=mn())===n&&(e=function(){var r,e,s,a,u,o,c,i,f,l,h,p,A,d,g,v,b,y,m,C,w,x,$,E;r=$e,e=$e,s=[],Ir.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(Mr));if(a!==n)for(;a!==n;)s.push(a),Ir.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(Mr));else s=n;if(s!==n)if(45===t.charCodeAt($e)?(a=Xr,$e++):(a=n,0===Be&&ze(Yr)),a!==n)if(Ir.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(Mr)),u!==n)if(Ir.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Mr)),o!==n)if(45===t.charCodeAt($e)?(c=Xr,$e++):(c=n,0===Be&&ze(Yr)),c!==n)if(Ir.test(t.charAt($e))?(i=t.charAt($e),$e++):(i=n,0===Be&&ze(Mr)),i!==n)if(Ir.test(t.charAt($e))?(f=t.charAt($e),$e++):(f=n,0===Be&&ze(Mr)),f!==n){if(l=$e,84===t.charCodeAt($e)?(h="T",$e++):(h=n,0===Be&&ze(Gr)),h!==n)if(Ir.test(t.charAt($e))?(p=t.charAt($e),$e++):(p=n,0===Be&&ze(Mr)),p!==n)if(Ir.test(t.charAt($e))?(A=t.charAt($e),$e++):(A=n,0===Be&&ze(Mr)),A!==n)if(58===t.charCodeAt($e)?(d=J,$e++):(d=n,0===Be&&ze(K)),d!==n)if(Ir.test(t.charAt($e))?(g=t.charAt($e),$e++):(g=n,0===Be&&ze(Mr)),g!==n)if(Ir.test(t.charAt($e))?(v=t.charAt($e),$e++):(v=n,0===Be&&ze(Mr)),v!==n){if(b=$e,58===t.charCodeAt($e)?(y=J,$e++):(y=n,0===Be&&ze(K)),y!==n)if(Ir.test(t.charAt($e))?(m=t.charAt($e),$e++):(m=n,0===Be&&ze(Mr)),m!==n)if(Ir.test(t.charAt($e))?(C=t.charAt($e),$e++):(C=n,0===Be&&ze(Mr)),C!==n){if(w=$e,46===t.charCodeAt($e)?(x=".",$e++):(x=n,0===Be&&ze(Jr)),x!==n){if($=[],Ir.test(t.charAt($e))?(E=t.charAt($e),$e++):(E=n,0===Be&&ze(Mr)),E!==n)for(;E!==n;)$.push(E),Ir.test(t.charAt($e))?(E=t.charAt($e),$e++):(E=n,0===Be&&ze(Mr));else $=n;$!==n?w=x=[x,$]:($e=w,w=n)}else $e=w,w=n;w===n&&(w=null),w!==n?b=y=[y,m,C,w]:($e=b,b=n)}else $e=b,b=n;else $e=b,b=n;else $e=b,b=n;b===n&&(b=null),b!==n?(90===t.charCodeAt($e)?(y="Z",$e++):(y=n,0===Be&&ze(Kr)),y===n&&(y=$e,43===t.charCodeAt($e)?(m="+",$e++):(m=n,0===Be&&ze(Qr)),m===n&&(45===t.charCodeAt($e)?(m=Xr,$e++):(m=n,0===Be&&ze(Yr))),m!==n?(Ir.test(t.charAt($e))?(C=t.charAt($e),$e++):(C=n,0===Be&&ze(Mr)),C!==n?(Ir.test(t.charAt($e))?(w=t.charAt($e),$e++):(w=n,0===Be&&ze(Mr)),w!==n?(58===t.charCodeAt($e)?(x=J,$e++):(x=n,0===Be&&ze(K)),x!==n?(Ir.test(t.charAt($e))?($=t.charAt($e),$e++):($=n,0===Be&&ze(Mr)),$!==n?(Ir.test(t.charAt($e))?(E=t.charAt($e),$e++):(E=n,0===Be&&ze(Mr)),E!==n?y=m=[m,C,w,x,$,E]:($e=y,y=n)):($e=y,y=n)):($e=y,y=n)):($e=y,y=n)):($e=y,y=n)):($e=y,y=n)),y===n&&(y=null),y!==n?l=h=[h,p,A,d,g,v,b,y]:($e=l,l=n)):($e=l,l=n)}else $e=l,l=n;else $e=l,l=n;else $e=l,l=n;else $e=l,l=n;else $e=l,l=n;else $e=l,l=n;l===n&&(l=null),l!==n?e=s=[s,a,u,o,c,i,f,l]:($e=e,e=n)}else $e=e,e=n;else $e=e,e=n;else $e=e,e=n;else $e=e,e=n;else $e=e,e=n;else $e=e,e=n;else $e=e,e=n;r=e!==n?t.substring(r,$e):e;return r}()),e!==n&&(r,e=xt(e)),(r=e)===n&&(r=$e,(e=$n())!==n&&(r,e=xt(e)),(r=e)===n&&(r=$e,e=function(){var r,e,s,a,u,o,c,i,f,l;r=$e,e=$e,s=$e,Vr.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(Wr));a===n&&(a=null);if(a!==n){if(u=[],Ir.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Mr)),o!==n)for(;o!==n;)u.push(o),Ir.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Mr));else u=n;if(u!==n){if(o=$e,46===t.charCodeAt($e)?(c=Hr,$e++):(c=n,0===Be&&ze(Jr)),c!==n){if(i=[],Ir.test(t.charAt($e))?(f=t.charAt($e),$e++):(f=n,0===Be&&ze(Mr)),f!==n)for(;f!==n;)i.push(f),Ir.test(t.charAt($e))?(f=t.charAt($e),$e++):(f=n,0===Be&&ze(Mr));else i=n;i!==n?o=c=[c,i]:($e=o,o=n)}else $e=o,o=n;if(o===n&&(o=null),o!==n){if(c=$e,101===t.charCodeAt($e)?(i="e",$e++):(i=n,0===Be&&ze(te)),i!==n){if(f=[],Ir.test(t.charAt($e))?(l=t.charAt($e),$e++):(l=n,0===Be&&ze(Mr)),l!==n)for(;l!==n;)f.push(l),Ir.test(t.charAt($e))?(l=t.charAt($e),$e++):(l=n,0===Be&&ze(Mr));else f=n;f!==n?c=i=[i,f]:($e=c,c=n)}else $e=c,c=n;c===n&&(c=null),c!==n?s=a=[a,u,o,c]:($e=s,s=n)}else $e=s,s=n}else $e=s,s=n}else $e=s,s=n;e=s!==n?t.substring(e,$e):s;e!==n&&(r,e=Dn(e));return r=e}(),e!==n&&(r,e="number"==typeof(s=e)?{val:s}:{val:s,literal:"number"}),(r=e)===n&&(r=$e,(e=Cn())!==n&&(r,e=xt(e)),(r=e)===n&&(r=$e,e=function(){var r,e,s,a,u,o;r=$e,t.substr($e,7)===le?(e=le,$e+=7):(e=n,0===Be&&ze(he));if(e!==n){if(s=$e,a=$e,u=[],pe.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Ae)),o!==n)for(;o!==n;)u.push(o),pe.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Ae));else u=n;u!==n?(t.substr($e,2)===de?(o=de,$e+=2):(o=n,0===Be&&ze(ge)),o===n&&(61===t.charCodeAt($e)?(o=v,$e++):(o=n,0===Be&&ze(b))),o===n&&(o=null),o!==n?a=u=[u,o]:($e=a,a=n)):($e=a,a=n),(s=a!==n?t.substring(s,$e):a)!==n?(39===t.charCodeAt($e)?(a=Tr,$e++):(a=n,0===Be&&ze(_r)),a!==n?(r,r=e=Un(s)):($e=r,r=n)):($e=r,r=n)}else $e=r,r=n;return r}(),e!==n&&(r,e=xt(e)),r=e)))),r}function en(){var r,e,s,a,u,o;if(r=$e,e=$e,s=$e,123===t.charCodeAt($e)?(a="{",$e++):(a=n,0===Be&&ze($t)),a!==n){for(u=[],(o=en())===n&&(Et.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Lt)));o!==n;)u.push(o),(o=en())===n&&(Et.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Lt)));u!==n?(125===t.charCodeAt($e)?(o="}",$e++):(o=n,0===Be&&ze(St)),o!==n?s=a=[a,u,o]:($e=s,s=n)):($e=s,s=n)}else $e=s,s=n;return(e=s!==n?t.substring(e,$e):s)!==n&&(r,e=xt(e)),r=e}function nn(){var r,e,s,a,u,o,c,i;if(r=$e,e=$e,s=$e,91===t.charCodeAt($e)?(a=Bt,$e++):(a=n,0===Be&&ze(Tt)),a!==n&&(u=_n())!==n?(93===t.charCodeAt($e)?(o=_t,$e++):(o=n,0===Be&&ze(Ot)),o!==n?s=a=[a,u,o]:($e=s,s=n)):($e=s,s=n),s===n)if(s=$e,91===t.charCodeAt($e)?(a=Bt,$e++):(a=n,0===Be&&ze(Tt)),a!==n)if((u=_n())!==n)if(123===t.charCodeAt($e)?(o="{",$e++):(o=n,0===Be&&ze($t)),o!==n){for(c=[],(i=nn())===n&&(Zt.test(t.charAt($e))?(i=t.charAt($e),$e++):(i=n,0===Be&&ze(Rt)));i!==n;)c.push(i),(i=nn())===n&&(Zt.test(t.charAt($e))?(i=t.charAt($e),$e++):(i=n,0===Be&&ze(Rt)));c!==n?(93===t.charCodeAt($e)?(i=_t,$e++):(i=n,0===Be&&ze(Ot)),i!==n?s=a=[a,u,o,c,i]:($e=s,s=n)):($e=s,s=n)}else $e=s,s=n;else $e=s,s=n;else $e=s,s=n;return(e=s!==n?t.substring(e,$e):s)!==n&&(r,e=xt(e)),r=e}function sn(){var r,e,s,a,u,o,c;if(Be++,r=$e,e=$e,s=[],st.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(at)),a!==n)for(;a!==n;)s.push(a),st.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(at));else s=n;if((e=s!==n?t.substring(e,$e):s)!==n)if((s=Bn())!==n)if((a=We())!==n){for(u=[],o=$e,Sn()!==n&&(c=We())!==n?(o,o=Ft(0,0,c)):($e=o,o=n);o!==n;)u.push(o),o=$e,Sn()!==n&&(c=We())!==n?(o,o=Ft(0,0,c)):($e=o,o=n);u!==n&&(o=Tn())!==n?(r,r=e=function(t,r,e){if(Rn&&!(t.toLowerCase()in Rn.functions))throw Object.assign(new Error(`"${t}" is an unknown function in OData URL spec (strict mode)`),{statusCode:400});return{func:t.toLowerCase(),args:[r,...e]}}(e,a,u)):($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;else $e=r,r=n;return Be--,r===n&&(e=n,0===Be&&ze(zt)),r}function an(){var r,e;return r=$e,_n()!==n?("not"===t.substr($e,3).toLowerCase()?(e=t.substr($e,3),$e+=3):(e=n,0===Be&&ze(It)),e!==n&&On()!==n?(r,r="not"):($e=r,r=n)):($e=r,r=n),r}function un(){var r,e;return r=$e,On()!==n?("and"===t.substr($e,3).toLowerCase()?(e=t.substr($e,3),$e+=3):(e=n,0===Be&&ze(Mt)),e!==n&&On()!==n?(r,r="and"):($e=r,r=n)):($e=r,r=n),r}function on(){var t,r;return t=$e,(r=On())!==n&&(t,r="and"),t=r}function cn(){var r,e;return r=$e,On()!==n?("or"===t.substr($e,2).toLowerCase()?(e=t.substr($e,2),$e+=2):(e=n,0===Be&&ze(Xt)),e!==n&&On()!==n?(r,r="or"):($e=r,r=n)):($e=r,r=n),r}function fn(){var r,e,s;return r=$e,t.substr($e,9)===Yt?(e=Yt,$e+=9):(e=n,0===Be&&ze(Gt)),e!==n?(s=function(){var t,r,e,s,a;if(t=$e,Bn()!==n)if(_n()!==n)if((r=ln())!==n){for(e=[],s=$e,_n()!==n&&Sn()!==n&&_n()!==n&&(a=ln())!==n?(s,s=hr(0,a)):($e=s,s=n);s!==n;)e.push(s),s=$e,_n()!==n&&Sn()!==n&&_n()!==n&&(a=ln())!==n?(s,s=hr(0,a)):($e=s,s=n);e!==n&&(s=_n())!==n&&Tn()!==n?(t,t=function(t,r){let e=jn.apply;e.aggregate&&(jn.apply={apply:e},e.groupBy&&(jn.apply.groupBy=e.groupBy),e=jn.apply),e.aggregate=[t,...r]}(r,e)):($e=t,t=n)}else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;return t}(),s!==n?r=e=[e,s]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,t.substr($e,7)===Ht?(e=Ht,$e+=7):(e=n,0===Be&&ze(Jt)),e!==n?(s=function(){var t,r,e,s,a,u,o,c,i;if(t=$e,(r=Bn())!==n)if((e=Bn())!==n)if((s=gn())!==n){for(a=[],u=$e,(o=Sn())!==n&&(c=gn())!==n?(u,u=o=hr(0,c)):($e=u,u=n);u!==n;)a.push(u),u=$e,(o=Sn())!==n&&(c=gn())!==n?(u,u=o=hr(0,c)):($e=u,u=n);a!==n?(u=$e,(o=Tn())!==n&&(u,o=function(t,r){let e=jn.apply;(e.groupBy||e.where||e.search)&&(jn.apply={apply:e},e=jn.apply),e.groupBy=[t,...r]}(s,a)),(u=o)!==n?(o=$e,(c=Sn())!==n&&(i=Qe())!==n?o=c=[c,i]:($e=o,o=n),o===n&&(o=null),o!==n&&(c=Tn())!==n?t=r=[r,e,s,a,u,o,c]:($e=t,t=n)):($e=t,t=n)):($e=t,t=n)}else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;return t}(),s!==n?r=e=[e,s]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,t.substr($e,6)===Kt?(e=Kt,$e+=6):(e=n,0===Be&&ze(Qt)),e!==n&&(s=vn())!==n?r=e=[e,s]:($e=r,r=n),r===n&&(r=$e,t.substr($e,6)===Vt?(e=Vt,$e+=6):(e=n,0===Be&&ze(Wt)),e!==n&&(s=bn())!==n?r=e=[e,s]:($e=r,r=n),r===n&&(r=$e,t.substr($e,6)===tr?(e=tr,$e+=6):(e=n,0===Be&&ze(rr)),e!==n?(s=function(){var t,r,e,s,a,u;t=$e,(r=Bn())!==n&&(e=_n())!==n?(s=$e,(a=Ie())!==n&&(s,a=function(t){if(!t)return;let r=jn.apply;r.search&&(jn.apply={apply:r},r=jn.apply),r.search=t}(a)),(s=a)!==n&&(a=_n())!==n&&(u=Tn())!==n?t=r=[r,e,s,a,u]:($e=t,t=n)):($e=t,t=n);return t}(),s!==n?r=e=[e,s]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,t.substr($e,6)===er?(e=er,$e+=6):(e=n,0===Be&&ze(nr)),e!==n?(s=function(){var t,r,e,s,a,u,o,c,i,f;if(t=$e,(r=Bn())!==n)if((e=_n())!==n)if((s=Qe())!==n){if(a=[],u=$e,(o=_n())!==n&&(c=Sn())!==n&&(i=_n())!==n&&(f=Qe())!==n?u=o=[o,c,i,f]:($e=u,u=n),u!==n)for(;u!==n;)a.push(u),u=$e,(o=_n())!==n&&(c=Sn())!==n&&(i=_n())!==n&&(f=Qe())!==n?u=o=[o,c,i,f]:($e=u,u=n);else a=n;a!==n&&(u=_n())!==n&&(o=Tn())!==n?t=r=[r,e,s,a,u,o]:($e=t,t=n)}else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;return t}(),s!==n?r=e=[e,s]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,t.substr($e,7)===sr?(e=sr,$e+=7):(e=n,0===Be&&ze(ar)),e!==n?(s=function(){var t,r,e,s,a,u,o,c,i,f;if(t=$e,(r=Bn())!==n)if((e=_n())!==n)if((s=yn())!==n){for(a=[],u=$e,(o=_n())!==n&&(c=Sn())!==n&&(i=_n())!==n&&(f=yn())!==n?u=o=[o,c,i,f]:($e=u,u=n);u!==n;)a.push(u),u=$e,(o=_n())!==n&&(c=Sn())!==n&&(i=_n())!==n&&(f=yn())!==n?u=o=[o,c,i,f]:($e=u,u=n);a!==n&&(u=_n())!==n&&(o=Tn())!==n?t=r=[r,e,s,a,u,o]:($e=t,t=n)}else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;return t}(),s!==n?r=e=[e,s]:($e=r,r=n)):($e=r,r=n),r===n&&(r=$e,"topcount"===t.substr($e,8).toLowerCase()?(e=t.substr($e,8),$e+=8):(e=n,0===Be&&ze(ur)),e===n&&("bottomcount"===t.substr($e,11).toLowerCase()?(e=t.substr($e,11),$e+=11):(e=n,0===Be&&ze(or)),e===n&&("topsum"===t.substr($e,6).toLowerCase()?(e=t.substr($e,6),$e+=6):(e=n,0===Be&&ze(cr)),e===n&&("bottomsum"===t.substr($e,9).toLowerCase()?(e=t.substr($e,9),$e+=9):(e=n,0===Be&&ze(ir)),e===n&&("toppercent"===t.substr($e,10).toLowerCase()?(e=t.substr($e,10),$e+=10):(e=n,0===Be&&ze(fr)),e===n&&("bottompercent"===t.substr($e,13).toLowerCase()?(e=t.substr($e,13),$e+=13):(e=n,0===Be&&ze(lr))))))),e!==n?(s=function(){var t,r,e;t=$e,Bn()!==n&&_n()!==n&&(r=We())!==n&&_n()!==n&&Sn()!==n&&_n()!==n&&(e=We())!==n&&_n()!==n&&Tn()!==n?(t,t=[r,e]):($e=t,t=n);return t}(),s!==n?(r,r=e=function(t,r){if(!{topcount:!0,bottomcount:!0,topsum:!1,bottomsum:!1,toppercent:!1,bottompercent:!1}[t=t.toLowerCase()])throw Object.assign(new Error(`Transformation "${t}" in $apply is not supported yet.`),{statusCode:501});(jn.apply.aggregate||(jn.apply.aggregate=[])).push({func:t,args:r})}(e,s)):($e=r,r=n)):($e=r,r=n),r===n&&(r=function(){var r;t.substr($e,8)===wr?(r=wr,$e+=8):(r=n,0===Be&&ze(xr));return r}())))))))),r}function ln(){var r,e,s,a;return r=$e,e=$e,t.substr($e,6)===f?(s=f,$e+=6):(s=n,0===Be&&ze(l)),s!==n&&(a=dn())!==n?(e,e=s={func:"count",args:[{val:1}],as:a}):($e=e,e=n),e===n&&(e=hn()),e!==n&&(r,e=e),r=e}function hn(){var t,r,e,s,a;return t=$e,(r=tn())!==n&&(e=pn())!==n?((s=An())===n&&(s=null),s!==n&&(a=dn())!==n?(t,t=r={func:e,args:[r],as:a}):($e=t,t=n)):($e=t,t=n),t===n&&(t=$e,(r=xn())!==n&&(e=Bn())!==n&&(s=hn())!==n&&(a=Tn())!==n?t=r=[r,e,s,a]:($e=t,t=n)),t}function pn(){var r,e,s,a,u;if(r=$e,On()!==n)if(t.substr($e,4)===pr?(e=pr,$e+=4):(e=n,0===Be&&ze(Ar)),e!==n)if(On()!==n){if(s=$e,a=[],st.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(at)),u!==n)for(;u!==n;)a.push(u),st.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(at));else a=n;(s=a!==n?t.substring(s,$e):a)!==n?(r,r=s.toLowerCase()):($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;else $e=r,r=n;return r}function An(){var r,e,s,a,u,o,c;return r=$e,(e=On())!==n?(t.substr($e,4)===dr?(s=dr,$e+=4):(s=n,0===Be&&ze(gr)),s!==n&&(a=On())!==n&&(u=tn())!==n&&(o=pn())!==n?((c=An())===n&&(c=null),c!==n?r=e=[e,s,a,u,o,c]:($e=r,r=n)):($e=r,r=n)):($e=r,r=n),r}function dn(){var r,e,s;return r=$e,On()!==n?("as"===t.substr($e,2)?(e="as",$e+=2):(e=n,0===Be&&ze(vr)),e!==n&&On()!==n&&(s=xn())!==n?(r,r=s):($e=r,r=n)):($e=r,r=n),r}function gn(){var r,e;return r=$e,e=function(){var r,e,s,a,u,o,c,i,f,l,h;r=$e,e=$e,t.substr($e,6)===br?(s=br,$e+=6):(s=n,0===Be&&ze(yr));if(s!==n)if((a=Bn())!==n)if((u=_n())!==n)if(t.substr($e,4)===mr?(o=mr,$e+=4):(o=n,0===Be&&ze(Cr)),o===n&&(o=tn()),o!==n){if(c=[],i=$e,(f=_n())!==n&&(l=Sn())!==n&&(h=tn())!==n?i=f=[f,l,h]:($e=i,i=n),i!==n)for(;i!==n;)c.push(i),i=$e,(f=_n())!==n&&(l=Sn())!==n&&(h=tn())!==n?i=f=[f,l,h]:($e=i,i=n);else c=n;c!==n&&(i=_n())!==n&&(f=Tn())!==n?e=s=[s,a,u,o,c,i,f]:($e=e,e=n)}else $e=e,e=n;else $e=e,e=n;else $e=e,e=n;else $e=e,e=n;e!==n&&(r,e=function(t){const r=new Error("Rollup in groupby is not supported yet.");throw r.statusCode=501,r}());return r=e}(),e===n&&(e=tn()),e!==n&&(r,e=e),r=e}function vn(){var t,r,e,s,a,u;return t=$e,(r=Bn())!==n&&(e=_n())!==n?(s=$e,(a=Xe())!==n&&(s,a=function(t){let r=jn.apply;r.where&&(jn.apply={apply:r},r=jn.apply),r.where=t}(a)),(s=a)!==n&&(a=_n())!==n&&(u=Tn())!==n?t=r=[r,e,s,a,u]:($e=t,t=n)):($e=t,t=n),t}function bn(){var t,r,e,s,a,u,o,c,i,f,l,h,p,A;if(t=$e,(r=Bn())!==n)if((e=_n())!==n)if((s=tn())!==n)if((a=_n())!==n)if((u=Sn())!==n)if((o=_n())!==n){if(c=$e,(i=bn())!==n){for(f=[],l=$e,(h=_n())!==n&&(p=Sn())!==n&&(A=bn())!==n?l=h=[h,p,A]:($e=l,l=n);l!==n;)f.push(l),l=$e,(h=_n())!==n&&(p=Sn())!==n&&(A=bn())!==n?l=h=[h,p,A]:($e=l,l=n);f!==n?c=i=[i,f]:($e=c,c=n)}else $e=c,c=n;if(c===n)if(c=$e,(i=vn())!==n){for(f=[],l=$e,(h=_n())!==n&&(p=Sn())!==n&&(A=bn())!==n?l=h=[h,p,A]:($e=l,l=n);l!==n;)f.push(l),l=$e,(h=_n())!==n&&(p=Sn())!==n&&(A=bn())!==n?l=h=[h,p,A]:($e=l,l=n);f!==n?c=i=[i,f]:($e=c,c=n)}else $e=c,c=n;c!==n&&(i=_n())!==n&&(f=Tn())!==n?t=r=[r,e,s,a,u,o,c,i,f]:($e=t,t=n)}else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;else $e=t,t=n;return t}function yn(){var t,r,e;return t=$e,(r=Ye())!==n&&(e=dn())!==n?t=r=[r,e]:($e=t,t=n),t}function mn(){var r,e;return r=$e,t.substr($e,4)===$r?(e=$r,$e+=4):(e=n,0===Be&&ze(Er)),e===n&&(t.substr($e,5)===Lr?(e=Lr,$e+=5):(e=n,0===Be&&ze(Sr))),e!==n&&(r,e="true"===e),r=e}function Cn(){var r,e,s,a,u;if(Be++,r=$e,39===t.charCodeAt($e)?(e=Tr,$e++):(e=n,0===Be&&ze(_r)),e!==n){for(s=$e,a=[],t.substr($e,2)===Or?(u=Or,$e+=2):(u=n,0===Be&&ze(Zr)),u===n&&(Rr.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(zr)));u!==n;)a.push(u),t.substr($e,2)===Or?(u=Or,$e+=2):(u=n,0===Be&&ze(Zr)),u===n&&(Rr.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(zr)));(s=a!==n?t.substring(s,$e):a)!==n?(39===t.charCodeAt($e)?(a=Tr,$e++):(a=n,0===Be&&ze(_r)),a!==n?(r,r=e=s.replace(/''/g,"'")):($e=r,r=n)):($e=r,r=n)}else $e=r,r=n;return Be--,r===n&&(e=n,0===Be&&ze(Br)),r}function wn(){var r,e,s,a,u,o;if(r=$e,e=$e,s=$e,Vr.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(Wr)),a===n&&(a=null),a!==n){if(u=[],Ir.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Mr)),o!==n)for(;o!==n;)u.push(o),Ir.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(Mr));else u=n;u!==n?s=a=[a,u]:($e=s,s=n)}else $e=s,s=n;return(e=s!==n?t.substring(e,$e):s)!==n&&(r,e=parseInt(e)),r=e}function xn(){var r,e,s,a,u,o,c,i;if(r=$e,e=$e,Be++,s=mn(),Be--,s===n?e=void 0:($e=e,e=n),e!==n)if(s=$e,Be++,a=$n(),Be--,a===n?s=void 0:($e=s,s=n),s!==n){if(a=$e,u=$e,re.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(ee)),o!==n){for(c=[],ne.test(t.charAt($e))?(i=t.charAt($e),$e++):(i=n,0===Be&&ze(se));i!==n;)c.push(i),ne.test(t.charAt($e))?(i=t.charAt($e),$e++):(i=n,0===Be&&ze(se));c!==n?u=o=[o,c]:($e=u,u=n)}else $e=u,u=n;(a=u!==n?t.substring(a,$e):u)!==n?(r,r=e=a):($e=r,r=n)}else $e=r,r=n;else $e=r,r=n;return r}function $n(){var r,e,s,a,u,o,c,i,f,l,h,p,A,d;return r=$e,e=$e,(s=En())!==n&&(a=En())!==n?(45===t.charCodeAt($e)?(u=Xr,$e++):(u=n,0===Be&&ze(Yr)),u===n&&(u=null),u!==n&&(o=En())!==n?(45===t.charCodeAt($e)?(c=Xr,$e++):(c=n,0===Be&&ze(Yr)),c===n&&(c=null),c!==n&&(i=En())!==n?(45===t.charCodeAt($e)?(f=Xr,$e++):(f=n,0===Be&&ze(Yr)),f===n&&(f=null),f!==n&&(l=En())!==n?(45===t.charCodeAt($e)?(h=Xr,$e++):(h=n,0===Be&&ze(Yr)),h===n&&(h=null),h!==n&&(p=En())!==n&&(A=En())!==n&&(d=En())!==n?e=s=[s,a,u,o,c,i,f,l,h,p,A,d]:($e=e,e=n)):($e=e,e=n)):($e=e,e=n)):($e=e,e=n)):($e=e,e=n),r=e!==n?t.substring(r,$e):e}function En(){var r,e,s,a,u,o;return r=$e,e=$e,ae.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(ue)),s!==n?(ae.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(ue)),a!==n?(ae.test(t.charAt($e))?(u=t.charAt($e),$e++):(u=n,0===Be&&ze(ue)),u!==n?(ae.test(t.charAt($e))?(o=t.charAt($e),$e++):(o=n,0===Be&&ze(ue)),o!==n?e=s=[s,a,u,o]:($e=e,e=n)):($e=e,e=n)):($e=e,e=n)):($e=e,e=n),r=e!==n?t.substring(r,$e):e}function Ln(){var r,e,s,a;if(r=$e,e=$e,s=[],oe.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(ce)),a!==n)for(;a!==n;)s.push(a),oe.test(t.charAt($e))?(a=t.charAt($e),$e++):(a=n,0===Be&&ze(ce));else s=n;return(e=s!==n?t.substring(e,$e):s)!==n&&(r,e={val:e}),r=e}function Sn(){var r,e,s,a;return r=$e,(e=_n())!==n?(44===t.charCodeAt($e)?(s=",",$e++):(s=n,0===Be&&ze(ve)),s!==n&&(a=_n())!==n?r=e=[e,s,a]:($e=r,r=n)):($e=r,r=n),r}function Bn(){var r,e,s,a;return r=$e,(e=_n())!==n?(40===t.charCodeAt($e)?(s="(",$e++):(s=n,0===Be&&ze(be)),s!==n&&(a=_n())!==n?r=e=[e,s,a]:($e=r,r=n)):($e=r,r=n),r}function Tn(){var r,e,s;return r=$e,(e=_n())!==n?(41===t.charCodeAt($e)?(s=")",$e++):(s=n,0===Be&&ze(ye)),s!==n?r=e=[e,s]:($e=r,r=n)):($e=r,r=n),r}function _n(){var r,e,s;for(Be++,r=$e,e=[],Ce.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(we));s!==n;)e.push(s),Ce.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(we));return r=e!==n?t.substring(r,$e):e,Be--,r===n&&(e=n,0===Be&&ze(me)),r}function On(){var r,e,s;if(Be++,r=$e,e=[],Ce.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(we)),s!==n)for(;s!==n;)e.push(s),Ce.test(t.charAt($e))?(s=t.charAt($e),$e++):(s=n,0===Be&&ze(we));else e=n;return r=e!==n?t.substring(r,$e):e,Be--,r===n&&(e=n,0===Be&&ze(xe)),r}const Zn=Object.assign,{strict:Rn,minimal:zn}=r,Fn=[];let jn,kn;const Nn=["$value"],Dn=r.safeNumber||function(t){const r=Number(t);return Number.isSafeInteger(r)?r:t},Un=r.standardBase64||function(t){return(t=t.replace(/_/g,"/").replace(/-/g,"+")).padEnd(t.length+t.length%4,"=")},Pn=t=>r=>t===r||t.as&&r.as&&t.as===r.as||r.as&&t.ref&&r.as===t.ref[t.ref.length-1]||t.ref&&r.ref&&t.ref.join("")===r.ref.join(""),qn=t=>r=>{if(Array.isArray(r))return r.map(qn(t));const e=r.ref&&t.find((t=>t.as&&t.func&&t.as===r.ref[0]));return e||r},In=t=>r=>Array.isArray(r)?r.map(In(t)):r.ref&&!t.find(Pn(r))?{val:null}:r,Mn=(t,r)=>{if(1===r.ref.length)t.find(Pn(r))||t.push(r);else{const e=r.ref.shift(),n=t.find((t=>t.ref&&t.ref[0]===e));if(n)Mn(n.expand,r);else{const n={ref:[e],expand:[]};Mn(n.expand,r),t.push(n)}}},Xn=(t,r,e=!1)=>{if(!r)return;if(t.apply&&delete t.apply,(r.apply||r.where&&t.where||r.search&&t.search)&&(t.from={SELECT:{from:t.from}}),r.where&&(t.where?t.from.SELECT.where=r.where:t.where=r.where),r.search&&(t.search?t.from.SELECT.search=r.search:t.search=r.search),r.groupBy){t.groupBy=[];for(const e of r.groupBy)t.groupBy.find(Pn(e))||t.groupBy.push(e)}const n=[...t.groupBy||[],...r.aggregate||[]];n.length&&(t.columns=t.columns&&!e?t.columns.reduce(((t,r)=>{const e=n.find(Pn(r));return e&&t.push(e),t}),[]):n,t.where&&(t.where=t.where.map(qn(t.columns)),t.groupBy&&(t.having=t.where.map(In(t.groupBy)),delete t.where)),t.columns=t.columns.reduce(((t,r)=>(r.ref&&r.ref.length>1&&n.find(Pn(r))?Mn(t,{ref:[...r.ref]}):t.push(r),t)),[])),r.apply&&Xn(t.from.SELECT,r.apply)},Yn=t=>{jn.limit&&jn.limit.offset&&jn.limit.offset.val&&(t+=jn.limit.offset.val),(jn.limit||(jn.limit={})).offset={val:t}},Gn=(t,r)=>{for(const e of r)e.ref&&e.ref[0]===t&&e.ref.shift(),e.func&&Gn(t,e.args);return r};if((e=a())!==n&&$e===t.length)return e;throw e!==n&&$e<t.length&&ze({type:"end"}),Fe(Se,Le<t.length?t.charAt(Le):null,Le<t.length?Re(Le,Le+1):Re(Le,Le))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(t,r){var e={literal:function(t){return'"'+s(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?a(t.parts[r][0])+"-"+a(t.parts[r][1]):a(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function s(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var r,n,s,a=new Array(t.length);for(r=0;r<t.length;r++)a[r]=(s=t[r],e[s.type](s));if(a.sort(),a.length>0){for(r=1,n=1;r<a.length;r++)a[r-1]!==a[r]&&(a[n]=a[r],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(t)+" but "+function(t){return t?'"'+s(t)+'"':"end of input"}(r)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
