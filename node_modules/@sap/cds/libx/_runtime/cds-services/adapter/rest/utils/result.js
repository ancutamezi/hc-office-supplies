/**
 * Convert any result to the format expected of rest.
 *
 * @param {*} result
 * @returns {string | object | boolean}
 */
const toRestResult = result => {
  let restResult = result

  // compat for mtx returning strings instead of objects
  if (typeof result === 'object' && '$count' in result) {
    restResult = {
      count: result.$count,
      value: result
    }
    // need to convert number to string because express interprets integer as status code
  } else if (typeof result === 'number') {
    restResult = result.toString()
  }

  return restResult
}

module.exports = {
  toRestResult
}
