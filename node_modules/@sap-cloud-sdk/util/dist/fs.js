"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readJSON = exports.findProjectRoot = void 0;
var fs_1 = require("fs");
var path_1 = require("path");
var logger_1 = require("./logger");
var logger = (0, logger_1.createLogger)({
    package: 'util',
    messageContext: 'fs'
});
function findProjectRoot(path, lastPath) {
    if (lastPath === void 0) { lastPath = path; }
    if (!path) {
        return lastPath;
    }
    var inProject = (0, fs_1.readdirSync)(path).includes('package.json') ||
        (0, fs_1.readdirSync)(path).includes('node_modules') ||
        path.includes('node_modules');
    if (!inProject) {
        return lastPath;
    }
    return findProjectRoot((0, path_1.resolve)(path, '..'), path);
}
exports.findProjectRoot = findProjectRoot;
/**
 * Read a JSON file from the file system.
 * @param path - The path to the JSON file.
 * @returns An object parsed from the JSON file.
 */
function readJSON(path) {
    if ((0, fs_1.existsSync)(path)) {
        return JSON.parse((0, fs_1.readFileSync)(path, 'utf8'));
    }
    logger.warn("File \"".concat(path, "\" does not exist, return empty object."));
    return {};
}
exports.readJSON = readJSON;
//# sourceMappingURL=fs.js.map